(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{542:function(t,s,a){"use strict";a.r(s);var n=a(28),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"从哪儿来到哪儿去"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从哪儿来到哪儿去"}},[t._v("#")]),t._v(" 从哪儿来到哪儿去")]),t._v(" "),a("h2",{attrs:{id:"流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#流程"}},[t._v("#")]),t._v(" 流程")]),t._v(" "),a("p",[t._v("指定一个或多个入口（源码目录文件） "),a("code",[t._v("entry")]),t._v("，将各个模块打包封装为一个或多个代码块 "),a("code",[t._v("chunk")]),t._v("，并生成文件一个或多个 "),a("code",[t._v("bundle")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"entry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entry"}},[t._v("#")]),t._v(" entry")]),t._v(" "),a("p",[t._v("确定入口模块的位置，定义 chunk name，默认为 "),a("code",[t._v("main")]),t._v("。其形式可以是："),a("strong",[t._v("字符串、对象、数组或函数")]),t._v("，字符串和数组其 chunk name 无法改变，只能是默认值。")]),t._v(" "),a("h3",{attrs:{id:"字符串入口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串入口"}},[t._v("#")]),t._v(" 字符串入口")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"数组入口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数组入口"}},[t._v("#")]),t._v(" 数组入口")]),t._v(" "),a("p",[t._v("将多个资源先合并，建过最后一个元素作为实际的入口路径。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-polyfill'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("上面等同于在 "),a("code",[t._v("./src/index.js")]),t._v(" 中 "),a("code",[t._v("import 'babel-polyfill'")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"对象入口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对象入口"}},[t._v("#")]),t._v(" 对象入口")]),t._v(" "),a("p",[t._v("定义多个入口时必须使用的形式。其中")]),t._v(" "),a("ul",[a("li",[t._v("对象的属性名 key 就是 chunk name;")]),t._v(" "),a("li",[t._v("对象的属性值 value 就是入口路径，可以是字符串，也可以为数组；")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-polyfill'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lib'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/lib.js'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"函数式入口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数式入口"}},[t._v("#")]),t._v(" 函数式入口")]),t._v(" "),a("p",[t._v("只要返回"),a("strong",[t._v("字符串、数组和对象")]),t._v("，可以动态配置，支持返回一个 Promise 对象进行一步操作，自由度很大。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟异步操作")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"context"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#context"}},[t._v("#")]),t._v(" context")]),t._v(" "),a("p",[t._v("资源入口的路径前缀，务必使用绝对路径。其作用是为了让 "),a("code",[t._v("entry")]),t._v(" 编写更加简洁。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  context"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./index.js'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"提取-vendor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提取-vendor"}},[t._v("#")]),t._v(" 提取 vendor")]),t._v(" "),a("p",[t._v("通常，都是由 "),a("code",[t._v("app.js")]),t._v(" 单一入口进行引用，这样就会产生一个 "),a("code",[t._v("bundle.js")]),t._v(" 文件，随着业务扩展，资源体积越发增大，从而降低用户的页面渲染速度。另外，也是由于只产生一个 "),a("code",[t._v("bundle.js")]),t._v("，所以编码稍作改动更新，就用重新打包，用户也要跟着重新下载，友好度不理想。")]),t._v(" "),a("p",[t._v("我们都知道：库、框架等第三方模块（只要是非业务模块）这些几百年不会变化（夸张手法，意在说明不常改动更新），可集中打包。然后客户端缓存起来，从而提高用户界面的渲染速度。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    app"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/app.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    vendor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-dom'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-router'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("上面 "),a("code",[t._v("entry")]),t._v(" 增加了 chunk name 为 vendor 这个 key，其 value 是个数组，但是数组中的值路径并指出，这到底怎么回事？这个就需要 "),a("code",[t._v("optimization.splitChunks")]),t._v("（webpack4 之前是 "),a("code",[t._v("CommonsChunkPlugin")]),t._v("），将 app 和 vendor 这两个 chunk 中的模块提取出来。")]),t._v(" "),a("ul",[a("li",[t._v("app，含业务模块和第三方依赖模块；")]),t._v(" "),a("li",[t._v("vendor，第三方模块；")])]),t._v(" "),a("h2",{attrs:{id:"多页应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多页应用"}},[t._v("#")]),t._v(" 多页应用")]),t._v(" "),a("p",[t._v("我们希望的是一个页面对应一个独立的 bundle，而不是将所有页面打包到一个 bundle 中。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/home.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    shopCar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/shopCar.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    order"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/order.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    vendor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-dom'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-router'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"output"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output"}},[t._v("#")]),t._v(" output")]),t._v(" "),a("p",[t._v("说了这么多，都是在说资源入口，对于资源出口使用配置 "),a("code",[t._v("output")]),t._v(" 对象，其配置项有很多，在此只举例说明高频使用的一些属性配置。")]),t._v(" "),a("h3",{attrs:{id:"单入口和多入口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单入口和多入口"}},[t._v("#")]),t._v(" 单入口和多入口")]),t._v(" "),a("p",[t._v("1.单入口")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundle.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'assets'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    publicPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/dist'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("2.多入口")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    app"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/app.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    vendor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/vendor.js'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[name].js'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"filename"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#filename"}},[t._v("#")]),t._v(" filename")]),t._v(" "),a("p",[t._v("打包后的 bundle 名字，可配合 path，也可以是一个相对路径 "),a("code",[t._v("filename: './src/bundle.js'")]),t._v("，对于多入口场景可以 "),a("code",[t._v("filename: [name].js")]),t._v(";")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("变量名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("描述")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("[hash]")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("指代 webpack 此次打包所有资源生成的 hash")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("只要 chunk 内容发生变化，就会改变，影响其他资源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("[chunkhash]")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("指代当前 chunk 内容的 hash")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("只有当前 chunk 内容发生变化，才会改变，使用缓存推荐使用")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("[name]")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("指代当前 chunk 的 name")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("无")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("[id]")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("指代当前 chunk 的 id")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("无")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("[query]")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("指代 filename 配置项中的 query")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("与 chunk 内容无关，需开发者手动指定")])])])]),t._v(" "),a("p",[t._v("所以上面配置可以稍作改动")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    app"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/app.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    vendor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/vendor.js'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[name].[chunkhash].js'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("通常，只有"),a("strong",[t._v("生产环境才配置 "),a("code",[t._v("[chunkhash]")])]),t._v("，原因是为了更新缓存，开发环境无需配置。")]),t._v(" "),a("h3",{attrs:{id:"path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#path"}},[t._v("#")]),t._v(" path")]),t._v(" "),a("p",[t._v("指定资源文件"),a("strong",[t._v("输出位置")]),t._v("，其"),a("strong",[t._v("值须为绝对路径")]),t._v("，默认为 dist 目录。如果不更改它，可不必配置；")]),t._v(" "),a("h3",{attrs:{id:"publicpath"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#publicpath"}},[t._v("#")]),t._v(" publicPath")]),t._v(" "),a("p",[t._v("指定资源"),a("strong",[t._v("请求位置")]),t._v("，容易与上面 path 的输出位置弄混。请求一种来自 HTML 页面，比如 script 标签加载，一种来自 js 或 css 请求，加载 js、图片或字体等。主要有 3 中形式")]),t._v(" "),a("p",[t._v("1.HTML 形式\n相对路径。假设当前 HTML 地址是 "),a("code",[t._v("http://xxx.com/page/index.html")]),t._v("，现在加载 "),a("code",[t._v("index.js")]),t._v(" 文件")]),t._v(" "),a("ul",[a("li",[t._v("若 "),a("code",[t._v("publicPath： ''")]),t._v("，则 "),a("code",[t._v("http://xxx.com/page/index.js")]),t._v(";")]),t._v(" "),a("li",[t._v("若 "),a("code",[t._v("publicPath： './js'")]),t._v("，则 "),a("code",[t._v("http://xxx.com/page/js/index.js")]),t._v(";")]),t._v(" "),a("li",[t._v("若 "),a("code",[t._v("publicPath： '../assets'")]),t._v("，则 "),a("code",[t._v("http://xxx.com/assets/index.js")]),t._v(";")])]),t._v(" "),a("p",[t._v("2.HOST 形式\n相对路径。设置的值若是以 "),a("code",[t._v("/")]),t._v(" 开始，就是基于页面地址 host name 为基础路径的。假设当前 HTML 地址是 "),a("code",[t._v("http://xxx.com/page/index.html")]),t._v("，现在加载 "),a("code",[t._v("index.js")]),t._v(" 文件")]),t._v(" "),a("ul",[a("li",[t._v("若 "),a("code",[t._v("publicPath： '/'")]),t._v("，则 "),a("code",[t._v("http://xxx.com/index.js")]),t._v(";")]),t._v(" "),a("li",[t._v("若 "),a("code",[t._v("publicPath： '/js/'")]),t._v("，则 "),a("code",[t._v("http://xxx.com/js/index.js")]),t._v(";")]),t._v(" "),a("li",[t._v("若 "),a("code",[t._v("publicPath： '/assets/'")]),t._v("，则 "),a("code",[t._v("http://xxx.com/assets/index.js")]),t._v(";")])]),t._v(" "),a("p",[t._v("3.CDN\n绝对路径。通常这类资源都是静态的，由于静态资源的域名与当前页面域名不一致，所以才设置指定绝对路径。若 public 值以协议头或相对协议的形式开始，那就说明是与 CDN 相关。")]),t._v(" "),a("p",[t._v("假设当前 HTML 地址是 "),a("code",[t._v("http://xxx.com/page/index.html")]),t._v("，现在加载 "),a("code",[t._v("index.js")]),t._v(" 文件")]),t._v(" "),a("ul",[a("li",[t._v("若 "),a("code",[t._v("publicPath： 'https://cdn.com/'")]),t._v("，则 "),a("code",[t._v("https://cdn.com/index.js")]),t._v(";")]),t._v(" "),a("li",[t._v("若 "),a("code",[t._v("publicPath： 'http://cdn.com/'")]),t._v("，则 "),a("code",[t._v("http://cdn.com/index.js")]),t._v(";")]),t._v(" "),a("li",[t._v("若 "),a("code",[t._v("publicPath： '//cdn.com/assets/'")]),t._v("，则 "),a("code",[t._v("//cdn.com/assets/index.js")]),t._v(";")])]),t._v(" "),a("p",[a("strong",[t._v("注意")]),t._v("，前面我们介绍的 webpack-dev-server 中也有个 "),a("code",[t._v("publicPath")]),t._v("，比较容易弄混的是 webpack-dev-server 的 "),a("code",[t._v("publicPath")]),t._v(" 与 output 的 "),a("code",[t._v("publicPath")]),t._v("没有关系，却与 output 的 "),a("code",[t._v("path")]),t._v(" 有关系。可看")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/app.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundle.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  devServer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    publicPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/assets/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1989")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("启动 "),a("code",[t._v("webpack-dev-server")]),t._v(" 服务后，访问 "),a("code",[t._v("localhost:1989/dist/bundle.js")]),t._v(" 则会返回 404，因为 devServer.publicPath 此时设置的路径是 "),a("code",[t._v("localhost:1989/assets/")]),t._v("，所以访问 "),a("code",[t._v("localhost:1989/assets/bundle.js")]),t._v(" 才是有效路径。为了不必要引起这类麻烦问题，可将两者输出默认设置一致。")])])}),[],!1,null,null,null);s.default=e.exports}}]);