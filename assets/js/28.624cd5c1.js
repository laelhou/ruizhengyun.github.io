(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{231:function(t,a,r){t.exports=r.p+"assets/img/travis-github.2f02ad0c.png"},232:function(t,a,r){t.exports=r.p+"assets/img/travis-ci.097f5205.png"},392:function(t,a,r){"use strict";r.r(a);var s=r(28),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"travis-ci"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#travis-ci"}},[t._v("#")]),t._v(" Travis CI")]),t._v(" "),s("p",[t._v("软件开发除了要编写代码，还需要"),s("strong",[t._v("构建（build）和测试（test）")]),t._v("。为了提高开发效率，同时也使开发流程更可靠和专业化，就需要自动化工具。今天介绍的就是 "),s("a",{attrs:{href:"https://travis-ci.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Travis CI"),s("OutboundLink")],1),t._v("。不过我们先了解下持续集成。")]),t._v(" "),s("p",[s("img",{attrs:{src:r(231),alt:"Travis CI"}})]),t._v(" "),s("h2",{attrs:{id:"持续集成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#持续集成"}},[t._v("#")]),t._v(" 持续集成")]),t._v(" "),s("p",[t._v('持续集成指的是只要代码有变更，就自动运行构建和测试，反馈运行结果。确保符合预期以后，再将新代码"集成"到主干。其作用在于，每次代码的小幅变更，就能看到运行结果，从而不断累积小的变更，而不是在开发周期结束时，一次合并大量代码。')]),t._v(" "),s("h2",{attrs:{id:"travis-ci-作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#travis-ci-作用"}},[t._v("#")]),t._v(" Travis CI 作用")]),t._v(" "),s("ul",[s("li",[t._v("提供的是持续集成服务（Continuous Integration，简称 CI）。")]),t._v(" "),s("li",[t._v("绑定 Github 上面的项目，只要有新的代码，就会自动抓取。")]),t._v(" "),s("li",[t._v("提供一个运行环境，执行测试，完成构建，还能部署到服务器。")])]),t._v(" "),s("h2",{attrs:{id:"前提条件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前提条件"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),s("p",[t._v("Travis CI 只支持 Github，不支持其他代码托管服务。即必须满足以下条件：")]),t._v(" "),s("ul",[s("li",[t._v("拥有 Github 账号")]),t._v(" "),s("li",[t._v("帐号下面至少有一个项目")]),t._v(" "),s("li",[t._v("项目里有可运行的代码")]),t._v(" "),s("li",[t._v("项目包含构建或测试脚本")])]),t._v(" "),s("h2",{attrs:{id:"步骤流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤流程"}},[t._v("#")]),t._v(" 步骤流程")]),t._v(" "),s("h3",{attrs:{id:"关联-github-账号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关联-github-账号"}},[t._v("#")]),t._v(" 关联 Github 账号")]),t._v(" "),s("p",[t._v("访问 "),s("a",{attrs:{href:"https://travis-ci.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Travis CI"),s("OutboundLink")],1),t._v(" 官网，点击右上角个人头像，使用 Github 账户登录。此时，Travis 会列出你在 Github 上的所有仓库，打开你需要 Travis 帮你构建仓库（比如下图 "),s("code",[t._v("blog-react")]),t._v(" 仓库）的开关，此时该仓库就被激活，Travis 就会监听这个仓库的所有变化。")]),t._v(" "),s("p",[s("img",{attrs:{src:r(232),alt:"关联 Github 账号"}})]),t._v(" "),s("h3",{attrs:{id:"配置-travis-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-travis-yml"}},[t._v("#")]),t._v(" 配置 "),s("code",[t._v(".travis.yml")])]),t._v(" "),s("p",[t._v("在仓库（项目）根目录下建一个 "),s("code",[t._v(".travis.yml")]),t._v(" 文件（如果没有的话，这是配置文件，即设置 Travis 行为（编写命令），另外必须存在 Github 仓库里。只要仓库有 commit 提交，Travis 就会找 "),s("code",[t._v(".travis.yml")]),t._v("，然后执行里面的命令。")]),t._v(" "),s("p",[t._v("既然以 "),s("code",[t._v(".yml")]),t._v(" 为后缀名，那就有相应的格式规范，这个文件采用的是 "),s("RouterLink",{attrs:{to:"/architect/setting/yaml.html"}},[t._v("YAML")]),t._v(" 格式。")],1),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("language"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" node_js\nnode_js"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\nscript"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\nbefore_install"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" npm i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("g npm@version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("number\n")])])]),s("ul",[s("li",[s("code",[t._v("language")]),t._v(" 字段指定默认运行环境，对于"),s("a",{attrs:{href:"https://docs.travis-ci.com/user/languages",target:"_blank",rel:"noopener noreferrer"}},[t._v("支持的环境可参考"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("code",[t._v("script")]),t._v(" 指定运行的脚本，"),s("code",[t._v("true")]),t._v(" 表示不执行任何脚本，状态直接设为成功")])])])}),[],!1,null,null,null);a.default=e.exports}}]);