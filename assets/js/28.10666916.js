(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{357:function(t,a,s){t.exports=s.p+"assets/img/v1.file.d73778f3.png"},358:function(t,a,s){t.exports=s.p+"assets/img/v2.file.ac12b8c3.png"},359:function(t,a,s){t.exports=s.p+"assets/img/v3.file.1fd18776.png"},546:function(t,a,s){"use strict";s.r(a);var n=s(28),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"简介"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),n("p",[t._v("首先，Webpack 是一个开源"),n("strong",[t._v("模块打包")]),t._v("工具，"),n("strong",[t._v("核心功能")]),t._v("是解决模块间的依赖，将模块按照一定规则组织在一起，合并为一个或多个 "),n("code",[t._v(".js")]),t._v(" 文件。")]),t._v(" "),n("p",[t._v("了解过 Web 前端开发的小伙伴都知道，我们通常都在与 HTML、CSS 和 JS 等静态资源打交道，直接将工程中的源文件发布到服务器不就可以了吗？中间过程中加了 webpack 环节，有多大意义呢？")]),t._v(" "),n("h2",{attrs:{id:"模块化之前"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模块化之前"}},[t._v("#")]),t._v(" 模块化之前")]),t._v(" "),n("p",[t._v("一个项目在立项后，对于程序结构的设计，要是把所有代码都堆在一个文件中，那将是非常非常非常糟糕的事情（怎么会有人怎么做）。更好的方式是"),n("strong",[t._v("将这些代码按照特定功能拆分为多个代码段并存到多个文件中")]),t._v("，即么个代码段（文件）只实现特定功能，最终才将所有代码段组合在一起。这就是我们熟悉的"),n("strong",[t._v("模块化思想")]),t._v("，相信你会不排斥这种设计思路。")]),t._v(" "),n("p",[t._v("像 C、C++、Java 等程序语言，开发者直接可以使用模块化进行开发，可是 Javascript 在很长一段时间内只能通过 script 标签将多个 js 文件插入到页面中。这些都是历史原因了，真要追溯，那是设计 Javascript 的作者最初将 Javascript 定位成脚本语言，实现网页动态效果，所以无需模块化。"),n("strong",[t._v("随着用户对体验的要求变高，Javascript 原来的设计思路就暴露出许多问题")]),t._v("：")]),t._v(" "),n("ul",[n("li",[t._v("手动维护 Javascript 文件加载顺序，以解决文件件的依赖关系；")]),t._v(" "),n("li",[t._v("每个 script 标签都需要向服务器请求一次静态资源；")]),t._v(" "),n("li",[t._v("全局作用域的泛滥污染；")]),t._v(" "),n("li",[t._v("...")])]),t._v(" "),n("h2",{attrs:{id:"模块化引入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模块化引入"}},[t._v("#")]),t._v(" 模块化引入")]),t._v(" "),n("p",[t._v("为了解决上述问题，就不得不引入"),n("strong",[t._v("模块化设计思路")]),t._v("。")]),t._v(" "),n("ul",[n("li",[t._v("通过导出和导入语句来解决模块依赖关系；")]),t._v(" "),n("li",[t._v("模块可借助工具打包，合并相似功能资源文件，减少网络开销；")]),t._v(" "),n("li",[t._v("模块间的作用域是隔离的，这就解决了命令冲突；")]),t._v(" "),n("li",[t._v("...")])]),t._v(" "),n("h2",{attrs:{id:"模块化历史"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模块化历史"}},[t._v("#")]),t._v(" 模块化历史")]),t._v(" "),n("p",[t._v("引入模块化思路后，各社区先后开发了 AMD、CommonJS、CMD 等解决方案（这些或许读者都接触过或许都没用过，都没有关系，不用紧张）。2015年，ECMAScript 6.0（就是 ES6）正式定义了 Javascript 模块标准，前前后后 20 年，这一刻终于可以堂堂正正地说 Javascript 拥有模块这个概念了（感动的痛哭而涕，场面一度失控，哈哈）。")]),t._v(" "),n("p",[t._v("可是（我不想听），在得到大多数现代浏览器支持的同时，有些特性和功能还不能直接使用。")]),t._v(" "),n("ul",[n("li",[t._v("无法使用 code splitting 和 tree shaking 特性;")]),t._v(" "),n("li",[t._v("很多 npm 模块使用 CommonsJS 形式，而浏览器并不支持这类语法，所以无法直接使用；")]),t._v(" "),n("li",[t._v("兼容其他浏览器（客户是上帝，我们是开发者，也要考虑用户的体验啊）；")])]),t._v(" "),n("h2",{attrs:{id:"终于等到你"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#终于等到你"}},[t._v("#")]),t._v(" 终于等到你")]),t._v(" "),n("p",[t._v("既然问题出现了，那就得有方案解决。模块打包工具（module bundler，mb 这不是骂人那个单词的简称）就是保证将打包后的文件正确无误地运行在浏览器中。当下，明星产品有 webpack、parce 和 Rollup 等。")]),t._v(" "),n("p",[t._v("其工作方式：")]),t._v(" "),n("ul",[n("li",[t._v("在页面初始化时加载入口模块，其他模块按需异步加载；")]),t._v(" "),n("li",[t._v("存在依赖关系的模块按照一定规则合并为单个文件，一次性加载到页面中；")])]),t._v(" "),n("h2",{attrs:{id:"为何选择你"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#为何选择你"}},[t._v("#")]),t._v(" 为何选择你")]),t._v(" "),n("p",[t._v("那为何选择 webpack 呢？（因为这本书就是讲它啊，这个就不用说了）主要是 webpack 很给力，自带特性如下，容我慢慢道来：")]),t._v(" "),n("ul",[n("li",[t._v("支持多种模块标准（AMD、CommonJS、ES6模块）；")]),t._v(" "),n("li",[t._v("支持多种类型资源的处理，比如图片、样式等；")]),t._v(" "),n("li",[t._v("拥有活跃社区支持，你不是一个人在战斗；")]),t._v(" "),n("li",[t._v("code splitting（上面刚提过），即代码分割，意思是分割打包后的资源，首屏只加载必要的部分，不太重要部分翻到后面动态（按需）加载。对于体积大的应用来说就是福音啊，可以减小资源体积，提升首页渲染速度；")])]),t._v(" "),n("h2",{attrs:{id:"安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),n("p",[t._v("依赖 Node.js 这个就不在赘述，推荐使用 Node.js 的 LTS （Long Term Support）版本。")]),t._v(" "),n("ul",[n("li",[t._v("全局安装，好处是绑定一个命令行环境变量，即一次安装、出处运行；")]),t._v(" "),n("li",[t._v("本地安装，成为项目中的依赖，只能在项目内部使用，推荐本地安装；\n"),n("ul",[n("li",[t._v("通常项目都不是一个人开发，由于每个开发者系统中的 webpack 版本不同，可能导致输出结果也不同（相信这不是你我所希望看到的）；")]),t._v(" "),n("li",[t._v("部门插件（依赖 webpack）会调用项目中 webpack 的内部模块，此时就得本地安装，若此时你全局安装本地未安装，容易导致问题不明确，耽误时间；")])])])]),t._v(" "),n("h2",{attrs:{id:"代码编写"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#代码编写"}},[t._v("#")]),t._v(" 代码编写")]),t._v(" "),n("p",[t._v("1.创建 "),n("code",[t._v("myapp/01")]),t._v("，然后执行安装命令")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("npm init "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("y\n\nnpm i webpack webpack"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cli "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n")])])]),n("p",[t._v("2.编写 "),n("code",[t._v("01/index.html")]),t._v("、"),n("code",[t._v("01/index.js")]),t._v(" 和 "),n("code",[t._v("01/util.js")]),t._v(" 文件")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token doctype"}},[t._v("<!DOCTYPE html>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("en"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width, initial-scale=1.0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("X-UA-Compatible"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ie=edge"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("01 webpack"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("./dist/bundler.js"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}}),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 01/index.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" util "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./util'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'我是主文件'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("util"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 01/util.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'我是依赖文件'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("3.打包执行")]),t._v(" "),n("p",[t._v("命令行直接输入执行")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("npx webpack "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("entry"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("output"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("filename"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bundler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("mode"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("development\n")])])]),n("p",[t._v("或修改 "),n("code",[t._v("package.json")]),t._v(" 中的 "),n("code",[t._v("scripts")]),t._v("，然后命令行执行 "),n("code",[t._v("npm run build")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 01/package.json")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack --entry=./index.js --output-filename=bundler.js --mode=development"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),n("ul",[n("li",[n("strong",[t._v("entry")]),t._v("，入口文件，查找模块依赖找到 "),n("code",[t._v("util.js")]),t._v("，然后一起打包成一个文件；")]),t._v(" "),n("li",[n("strong",[t._v("output-filename")]),t._v("，输出资源名；")]),t._v(" "),n("li",[n("strong",[t._v("mode")]),t._v("，打包模式，其中参数有 "),n("code",[t._v("development、production、none")]),t._v(" 三种；")])]),t._v(" "),n("p",[t._v("4.在浏览器打开 "),n("code",[t._v("index.html")]),t._v(" 文件；")]),t._v(" "),n("p",[t._v("完整代码可"),n("a",{attrs:{href:"https://github.com/ruizhengyun/webpack-note/tree/master/myapp/01",target:"_blank",rel:"noopener noreferrer"}},[t._v("查看目录 01 =>O(∩_∩)O~"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("img",{attrs:{src:s(357),alt:"v1"}})]),t._v(" "),n("h2",{attrs:{id:"借助配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#借助配置文件"}},[t._v("#")]),t._v(" 借助配置文件")]),t._v(" "),n("p",[t._v("其实像上面打包方式，参数写在命令中，虽可行但啰嗦不耐看，一旦打包需求复杂，那将是灾难，所以我们得借助配置文件，简化打包命令。可查看 "),n("code",[t._v("myapp/02")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 02/webpack.config.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" webpackConfig "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundler.js'")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mode"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webpackConfig"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("此时，对应 "),n("code",[t._v("package.json")]),t._v(" 中的 "),n("code",[t._v("scripts")]),t._v(" 可简化为")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 02/package.json")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("完整代码可"),n("a",{attrs:{href:"https://github.com/ruizhengyun/webpack-note/tree/master/myapp/02",target:"_blank",rel:"noopener noreferrer"}},[t._v("查看目录 02 =>O(∩_∩)O~"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("img",{attrs:{src:s(358),alt:"v2"}})]),t._v(" "),n("h2",{attrs:{id:"符合人类的开发环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#符合人类的开发环境"}},[t._v("#")]),t._v(" 符合人类的开发环境")]),t._v(" "),n("p",[t._v("不知道你可发现，每次改变文件，都要打包，然后才能刷新看到结果（天啊，世上还有更烂的开发环境么？）。所以，我们得改变，"),n("code",[t._v("webpack-dev-seaver")]),t._v(" 就要登场了，从文件名就可看出其功能提供 webpack 开发服务。既然是开发，那就说明在发生产时不需要此包，那安装就是 "),n("code",[t._v("npm install webpack-dev-seraver -D")]),t._v("。")]),t._v(" "),n("p",[t._v("其主要功能是服务启动时，让 webpack 模板打包并生成静态资源，待接收浏览器请求后，进行 url 校验，如果地址正确（即配置参数 "),n("code",[t._v("publicPath")]),t._v("），就从打包结果（内存）中找到对应资源（此刻请求的文件 "),n("code",[t._v("bundler.js")]),t._v(" 只在内存中，未写入到实际硬盘 "),n("code",[t._v("bundler.js")]),t._v(" 中，验证这点很简单，删除 "),n("code",[t._v("03/release")]),t._v(" 目录，你会发现即时没有该目录依旧可以访问文件 "),n("code",[t._v("/release/bundler.js")]),t._v(" ）返回给浏览器，如果不正确，就从硬盘读取资源文件返回给浏览器。写入内存，读取速度很快，如果每次都删除磁盘文件然后再写入，性能明显低下。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 03/webpack.config.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" webpackConfig "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundler.js'")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mode"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  devServer"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    publicPath"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/release'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    port"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1989'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    open"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webpackConfig"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("ul",[n("li",[t._v("配置文件新增了 "),n("code",[t._v("devServer")]),t._v(" 对象，主要配置 "),n("code",[t._v("webpack-dev-server")]),t._v(";")]),t._v(" "),n("li",[n("code",[t._v("publicPath")]),t._v(" 是开发环境静态资源的地址（内存中），这里为了能体现出效果，本该设置 "),n("code",[t._v("/dist")]),t._v("，现改为 "),n("code",[t._v("/release")]),t._v("；")]),t._v(" "),n("li",[n("code",[t._v("port")]),t._v(" 就是端口了;")]),t._v(" "),n("li",[n("code",[t._v("open")]),t._v(" 设为 "),n("code",[t._v("true")]),t._v("，即当服务启动好后，自动打开地址 "),n("code",[t._v("http://localhost:1989")]),t._v("（太人性化了，my love）;")]),t._v(" "),n("li",[t._v("...（其他参数以后篇幅会涉及，不要着急，年轻人）")])]),t._v(" "),n("p",[t._v("既然静态资源地址改了，那我们 HTML ("),n("code",[t._v("03/src/index.html")]),t._v(") 也得配合修改")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token doctype"}},[t._v("<!DOCTYPE html>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("en"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width, initial-scale=1.0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("X-UA-Compatible"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ie=edge"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("03 webpack"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("./release/bundler.js"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}}),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("此刻，你可以改下 "),n("code",[t._v("03/index.js")]),t._v(" 和 "),n("code",[t._v("03/util.js")]),t._v(" 文件，浏览器会自动刷新是不是（我知道你看到了），这是 "),n("code",[t._v("webpack-dev-server")]),t._v(" 的自动刷新（live-reloading）功能。再一次提升了本地开发的效率。")]),t._v(" "),n("p",[t._v("通过亲自实践，我们可以总结："),n("code",[t._v("webpack-dev-server")]),t._v(" 至少有以下几点功能：")]),t._v(" "),n("ul",[n("li",[t._v("提供处理静态资源文件请求的本地服务（服务器都该能干的事）；")]),t._v(" "),n("li",[t._v("提供 webpack 模块打包；")]),t._v(" "),n("li",[t._v("live-reloading，自动刷新浏览器功能，即监听文件变化；")])]),t._v(" "),n("p",[t._v("完整代码可"),n("a",{attrs:{href:"https://github.com/ruizhengyun/webpack-note/tree/master/myapp/03",target:"_blank",rel:"noopener noreferrer"}},[t._v("查看目录 03 =>O(∩_∩)O~"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("img",{attrs:{src:s(359),alt:"v3"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);