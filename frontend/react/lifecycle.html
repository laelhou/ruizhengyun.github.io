<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>生命周期 | 编程之上</title>
    <meta name="description" content="编程之上，致力于前后端、DevOps 等文章，使各端开发者能够突破瓶颈进一步成长。同时，也记录个人生活，不负芳华。">
    <meta name="generator" content="VuePress 1.3.1">
    
    
    <link rel="preload" href="/assets/css/0.styles.26cb1efd.css" as="style"><link rel="preload" href="/assets/js/app.e81b8cfe.js" as="script"><link rel="preload" href="/assets/js/2.e6f4d46e.js" as="script"><link rel="preload" href="/assets/js/24.a63d4ca5.js" as="script"><link rel="prefetch" href="/assets/js/10.5fa34354.js"><link rel="prefetch" href="/assets/js/100.054a5662.js"><link rel="prefetch" href="/assets/js/101.deca23b9.js"><link rel="prefetch" href="/assets/js/102.75feb3b9.js"><link rel="prefetch" href="/assets/js/103.5295461f.js"><link rel="prefetch" href="/assets/js/104.ac48597a.js"><link rel="prefetch" href="/assets/js/105.23885d59.js"><link rel="prefetch" href="/assets/js/106.0a0c08c2.js"><link rel="prefetch" href="/assets/js/107.89e90acb.js"><link rel="prefetch" href="/assets/js/108.52e1bd31.js"><link rel="prefetch" href="/assets/js/109.2a6e0063.js"><link rel="prefetch" href="/assets/js/11.23691164.js"><link rel="prefetch" href="/assets/js/110.aa720c00.js"><link rel="prefetch" href="/assets/js/111.8d3537d1.js"><link rel="prefetch" href="/assets/js/112.3c52f8a4.js"><link rel="prefetch" href="/assets/js/113.6595e4fa.js"><link rel="prefetch" href="/assets/js/114.683278fc.js"><link rel="prefetch" href="/assets/js/115.e2f67236.js"><link rel="prefetch" href="/assets/js/116.0a67d906.js"><link rel="prefetch" href="/assets/js/117.5f7f3075.js"><link rel="prefetch" href="/assets/js/118.01a4229c.js"><link rel="prefetch" href="/assets/js/119.a1eea72c.js"><link rel="prefetch" href="/assets/js/12.6ffe8fd7.js"><link rel="prefetch" href="/assets/js/120.4e8ed9c2.js"><link rel="prefetch" href="/assets/js/121.62293bff.js"><link rel="prefetch" href="/assets/js/122.af0cbd35.js"><link rel="prefetch" href="/assets/js/123.81098794.js"><link rel="prefetch" href="/assets/js/124.dcf282bd.js"><link rel="prefetch" href="/assets/js/125.082b532c.js"><link rel="prefetch" href="/assets/js/126.84037026.js"><link rel="prefetch" href="/assets/js/127.b8f01b64.js"><link rel="prefetch" href="/assets/js/128.e7a837b1.js"><link rel="prefetch" href="/assets/js/129.888a7330.js"><link rel="prefetch" href="/assets/js/13.6bae060f.js"><link rel="prefetch" href="/assets/js/130.e0cd0e78.js"><link rel="prefetch" href="/assets/js/131.67d82467.js"><link rel="prefetch" href="/assets/js/132.12479c28.js"><link rel="prefetch" href="/assets/js/133.7aaf937e.js"><link rel="prefetch" href="/assets/js/134.8347b761.js"><link rel="prefetch" href="/assets/js/135.965c1199.js"><link rel="prefetch" href="/assets/js/136.5f41d5d5.js"><link rel="prefetch" href="/assets/js/137.a6bba66f.js"><link rel="prefetch" href="/assets/js/138.ee0eee6f.js"><link rel="prefetch" href="/assets/js/139.3a59b277.js"><link rel="prefetch" href="/assets/js/14.aca43021.js"><link rel="prefetch" href="/assets/js/140.867db40e.js"><link rel="prefetch" href="/assets/js/141.031ba2ab.js"><link rel="prefetch" href="/assets/js/142.61f8fa0f.js"><link rel="prefetch" href="/assets/js/143.2e1efc0c.js"><link rel="prefetch" href="/assets/js/144.bccb1416.js"><link rel="prefetch" href="/assets/js/145.be1ca204.js"><link rel="prefetch" href="/assets/js/146.50a146e6.js"><link rel="prefetch" href="/assets/js/147.dcc0597a.js"><link rel="prefetch" href="/assets/js/148.933147ae.js"><link rel="prefetch" href="/assets/js/149.921df107.js"><link rel="prefetch" href="/assets/js/15.4f5a5421.js"><link rel="prefetch" href="/assets/js/150.bcd7f60e.js"><link rel="prefetch" href="/assets/js/151.62bf6571.js"><link rel="prefetch" href="/assets/js/152.1d370cec.js"><link rel="prefetch" href="/assets/js/153.165e4d2c.js"><link rel="prefetch" href="/assets/js/154.4138c5a5.js"><link rel="prefetch" href="/assets/js/155.9760d506.js"><link rel="prefetch" href="/assets/js/156.882dded9.js"><link rel="prefetch" href="/assets/js/157.46b74338.js"><link rel="prefetch" href="/assets/js/158.85ccb68f.js"><link rel="prefetch" href="/assets/js/159.f6afb18a.js"><link rel="prefetch" href="/assets/js/16.38b7179c.js"><link rel="prefetch" href="/assets/js/160.5090679f.js"><link rel="prefetch" href="/assets/js/161.a1cb2e7d.js"><link rel="prefetch" href="/assets/js/162.79080b2a.js"><link rel="prefetch" href="/assets/js/163.b7438b68.js"><link rel="prefetch" href="/assets/js/164.6b12d4ec.js"><link rel="prefetch" href="/assets/js/165.39b222c3.js"><link rel="prefetch" href="/assets/js/166.f3e43ffd.js"><link rel="prefetch" href="/assets/js/167.b4d1535c.js"><link rel="prefetch" href="/assets/js/168.dd0867ae.js"><link rel="prefetch" href="/assets/js/169.33e13e01.js"><link rel="prefetch" href="/assets/js/17.9a32e9a5.js"><link rel="prefetch" href="/assets/js/170.a2fc407f.js"><link rel="prefetch" href="/assets/js/171.85c643f1.js"><link rel="prefetch" href="/assets/js/172.4d47209f.js"><link rel="prefetch" href="/assets/js/173.d393e674.js"><link rel="prefetch" href="/assets/js/174.8df10b61.js"><link rel="prefetch" href="/assets/js/175.6598c6fe.js"><link rel="prefetch" href="/assets/js/176.4f62e51e.js"><link rel="prefetch" href="/assets/js/177.670e6277.js"><link rel="prefetch" href="/assets/js/178.27baaf04.js"><link rel="prefetch" href="/assets/js/179.1c9154cb.js"><link rel="prefetch" href="/assets/js/18.42c93012.js"><link rel="prefetch" href="/assets/js/180.e530db3f.js"><link rel="prefetch" href="/assets/js/181.fafc96ad.js"><link rel="prefetch" href="/assets/js/182.237cf7ff.js"><link rel="prefetch" href="/assets/js/183.74b764e5.js"><link rel="prefetch" href="/assets/js/184.6fa37e37.js"><link rel="prefetch" href="/assets/js/185.1ea644df.js"><link rel="prefetch" href="/assets/js/186.71496374.js"><link rel="prefetch" href="/assets/js/187.271a31a8.js"><link rel="prefetch" href="/assets/js/188.a0c332e3.js"><link rel="prefetch" href="/assets/js/189.25e1839f.js"><link rel="prefetch" href="/assets/js/19.7d5e7e38.js"><link rel="prefetch" href="/assets/js/190.f3a8ee1b.js"><link rel="prefetch" href="/assets/js/191.efa2945b.js"><link rel="prefetch" href="/assets/js/192.0d2d80e7.js"><link rel="prefetch" href="/assets/js/193.955c0e74.js"><link rel="prefetch" href="/assets/js/194.e824f311.js"><link rel="prefetch" href="/assets/js/195.714656a6.js"><link rel="prefetch" href="/assets/js/196.fbbf685d.js"><link rel="prefetch" href="/assets/js/197.eb0d49e1.js"><link rel="prefetch" href="/assets/js/198.de669c28.js"><link rel="prefetch" href="/assets/js/20.d742c97a.js"><link rel="prefetch" href="/assets/js/21.9e3d84e8.js"><link rel="prefetch" href="/assets/js/22.7be38c4a.js"><link rel="prefetch" href="/assets/js/23.d3d09ebf.js"><link rel="prefetch" href="/assets/js/25.6c3a4141.js"><link rel="prefetch" href="/assets/js/26.be3df6c1.js"><link rel="prefetch" href="/assets/js/27.6dc20c6c.js"><link rel="prefetch" href="/assets/js/28.61df0d7a.js"><link rel="prefetch" href="/assets/js/29.13d485ce.js"><link rel="prefetch" href="/assets/js/3.b8c0a42c.js"><link rel="prefetch" href="/assets/js/30.6f9f2068.js"><link rel="prefetch" href="/assets/js/31.06223651.js"><link rel="prefetch" href="/assets/js/32.f5328ac1.js"><link rel="prefetch" href="/assets/js/33.07911484.js"><link rel="prefetch" href="/assets/js/34.cf5bdff1.js"><link rel="prefetch" href="/assets/js/35.c6b6467a.js"><link rel="prefetch" href="/assets/js/36.a95047f1.js"><link rel="prefetch" href="/assets/js/37.06f0e31f.js"><link rel="prefetch" href="/assets/js/38.deca5597.js"><link rel="prefetch" href="/assets/js/39.b2a2c480.js"><link rel="prefetch" href="/assets/js/4.27e79820.js"><link rel="prefetch" href="/assets/js/40.c3cd1b61.js"><link rel="prefetch" href="/assets/js/41.036c16da.js"><link rel="prefetch" href="/assets/js/42.bcf0698d.js"><link rel="prefetch" href="/assets/js/43.4c9f98d2.js"><link rel="prefetch" href="/assets/js/44.40989c71.js"><link rel="prefetch" href="/assets/js/45.0264d807.js"><link rel="prefetch" href="/assets/js/46.19967918.js"><link rel="prefetch" href="/assets/js/47.3e6bbc6d.js"><link rel="prefetch" href="/assets/js/48.ef515251.js"><link rel="prefetch" href="/assets/js/49.fcaedd46.js"><link rel="prefetch" href="/assets/js/5.43c70a92.js"><link rel="prefetch" href="/assets/js/50.78e9db1b.js"><link rel="prefetch" href="/assets/js/51.bfe61f51.js"><link rel="prefetch" href="/assets/js/52.4b1c3c51.js"><link rel="prefetch" href="/assets/js/53.c19f8a91.js"><link rel="prefetch" href="/assets/js/54.56b09e53.js"><link rel="prefetch" href="/assets/js/55.4605f4af.js"><link rel="prefetch" href="/assets/js/56.5e33f6c6.js"><link rel="prefetch" href="/assets/js/57.3b8c6e2d.js"><link rel="prefetch" href="/assets/js/58.b1d116ce.js"><link rel="prefetch" href="/assets/js/59.e563b9a2.js"><link rel="prefetch" href="/assets/js/6.fddb8c5b.js"><link rel="prefetch" href="/assets/js/60.fc6f8574.js"><link rel="prefetch" href="/assets/js/61.7c7a016a.js"><link rel="prefetch" href="/assets/js/62.71e365a9.js"><link rel="prefetch" href="/assets/js/63.21193c78.js"><link rel="prefetch" href="/assets/js/64.f084f91e.js"><link rel="prefetch" href="/assets/js/65.a4b7dc61.js"><link rel="prefetch" href="/assets/js/66.916230b2.js"><link rel="prefetch" href="/assets/js/67.a53ac41e.js"><link rel="prefetch" href="/assets/js/68.8b4ff01e.js"><link rel="prefetch" href="/assets/js/69.ea650b0f.js"><link rel="prefetch" href="/assets/js/7.7c8f2501.js"><link rel="prefetch" href="/assets/js/70.0e68a461.js"><link rel="prefetch" href="/assets/js/71.4e969ee6.js"><link rel="prefetch" href="/assets/js/72.20e0176b.js"><link rel="prefetch" href="/assets/js/73.05558600.js"><link rel="prefetch" href="/assets/js/74.deeb542f.js"><link rel="prefetch" href="/assets/js/75.a66cd6ad.js"><link rel="prefetch" href="/assets/js/76.51cc2506.js"><link rel="prefetch" href="/assets/js/77.dbfe60c6.js"><link rel="prefetch" href="/assets/js/78.3da692f2.js"><link rel="prefetch" href="/assets/js/79.b37669c0.js"><link rel="prefetch" href="/assets/js/8.33f697f5.js"><link rel="prefetch" href="/assets/js/80.7d0d6433.js"><link rel="prefetch" href="/assets/js/81.96e7dc06.js"><link rel="prefetch" href="/assets/js/82.36aae36f.js"><link rel="prefetch" href="/assets/js/83.dc25d746.js"><link rel="prefetch" href="/assets/js/84.e089d96e.js"><link rel="prefetch" href="/assets/js/85.9bd28009.js"><link rel="prefetch" href="/assets/js/86.b0b1524a.js"><link rel="prefetch" href="/assets/js/87.d129af27.js"><link rel="prefetch" href="/assets/js/88.ac5e2fd5.js"><link rel="prefetch" href="/assets/js/89.55269467.js"><link rel="prefetch" href="/assets/js/9.3a1fbf2b.js"><link rel="prefetch" href="/assets/js/90.5778df13.js"><link rel="prefetch" href="/assets/js/91.227687c6.js"><link rel="prefetch" href="/assets/js/92.4365d88d.js"><link rel="prefetch" href="/assets/js/93.b33b0dc1.js"><link rel="prefetch" href="/assets/js/94.e588b810.js"><link rel="prefetch" href="/assets/js/95.5cf071a2.js"><link rel="prefetch" href="/assets/js/96.fb4aeedd.js"><link rel="prefetch" href="/assets/js/97.891a9789.js"><link rel="prefetch" href="/assets/js/98.a471fddb.js"><link rel="prefetch" href="/assets/js/99.4339e54c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.26cb1efd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">编程之上</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/http/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/frontend/react/" class="nav-link router-link-active">
  React
</a></li><li class="dropdown-item"><!----> <a href="/frontend/dva/" class="nav-link">
  Dva
</a></li><li class="dropdown-item"><!----> <a href="/frontend/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/frontend/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/frontend/npm/" class="nav-link">
  Npm
</a></li><li class="dropdown-item"><!----> <a href="/frontend/architect/" class="nav-link">
  前端架构
</a></li><li class="dropdown-item"><!----> <a href="/frontend/typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/chrome/" class="nav-link">
  Chrome
</a></li><li class="dropdown-item"><!----> <a href="/frontend/code-style/" class="nav-link">
  代码规范
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/nodejs/" class="nav-link">
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/backend/nodejswx/" class="nav-link">
  Node.js 开发微信公众号
</a></li></ul></div></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="架构" class="dropdown-title"><span class="title">架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/architect/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/architect/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/architect/setting/" class="nav-link">
  配置
</a></li><li class="dropdown-item"><!----> <a href="/architect/cli/" class="nav-link">
  Cli
</a></li></ul></div></div><div class="nav-item"><a href="/app/" class="nav-link">
  应用
</a></div><div class="nav-item"><a href="/view/" class="nav-link">
  看法
</a></div> <a href="https://github.com/ruizhengyun/ruizhengyun.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/http/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/frontend/react/" class="nav-link router-link-active">
  React
</a></li><li class="dropdown-item"><!----> <a href="/frontend/dva/" class="nav-link">
  Dva
</a></li><li class="dropdown-item"><!----> <a href="/frontend/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/frontend/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/frontend/npm/" class="nav-link">
  Npm
</a></li><li class="dropdown-item"><!----> <a href="/frontend/architect/" class="nav-link">
  前端架构
</a></li><li class="dropdown-item"><!----> <a href="/frontend/typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/chrome/" class="nav-link">
  Chrome
</a></li><li class="dropdown-item"><!----> <a href="/frontend/code-style/" class="nav-link">
  代码规范
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/nodejs/" class="nav-link">
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/backend/nodejswx/" class="nav-link">
  Node.js 开发微信公众号
</a></li></ul></div></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="架构" class="dropdown-title"><span class="title">架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/architect/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/architect/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/architect/setting/" class="nav-link">
  配置
</a></li><li class="dropdown-item"><!----> <a href="/architect/cli/" class="nav-link">
  Cli
</a></li></ul></div></div><div class="nav-item"><a href="/app/" class="nav-link">
  应用
</a></div><div class="nav-item"><a href="/view/" class="nav-link">
  看法
</a></div> <a href="https://github.com/ruizhengyun/ruizhengyun.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>入门</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/react/" class="sidebar-link">前言</a></li><li><a href="/frontend/react/evolution.html" class="sidebar-link">趴一趴族谱</a></li><li><a href="/frontend/react/initialization.html" class="sidebar-link">初始化项目</a></li><li><a href="/frontend/react/first_component.html" class="sidebar-link">第一个组件</a></li><li><a href="/frontend/react/lifecycle.html" class="active sidebar-link">生命周期</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/react/lifecycle.html#新的周期展示" class="sidebar-link">新的周期展示</a></li><li class="sidebar-sub-header"><a href="/frontend/react/lifecycle.html#三个阶段" class="sidebar-link">三个阶段</a></li><li class="sidebar-sub-header"><a href="/frontend/react/lifecycle.html#生命周期概述" class="sidebar-link">生命周期概述</a></li><li class="sidebar-sub-header"><a href="/frontend/react/lifecycle.html#生命周期详解" class="sidebar-link">生命周期详解</a></li><li class="sidebar-sub-header"><a href="/frontend/react/lifecycle.html#常用生命周期" class="sidebar-link">常用生命周期</a></li></ul></li><li><a href="/frontend/react/rendering.html" class="sidebar-link">页面渲染</a></li><li><a href="/frontend/react/handle.html" class="sidebar-link">事件处理</a></li><li><a href="/frontend/react/form.html" class="sidebar-link">表单</a></li><li><a href="/frontend/react/lifting_state_up.html" class="sidebar-link">状态提升</a></li><li><a href="/frontend/react/idea.html" class="sidebar-link">react理念</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>应用</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h1> <div style="display:flex;flex-direction:row;align-items:center;"><div style="flex:1;"><p><img src="/assets/img/lifecycle.275d2297.jpg"></p> <p style="text-align:center;">React16. 之前</p></div> <div style="flex:1;"><p><img src="/assets/img/lifecycle2.e5eb9a4c.jpg"></p> <p style="text-align:center;">React16.3</p></div></div> <h2 id="新的周期展示"><a href="#新的周期展示" class="header-anchor">#</a> 新的周期展示</h2> <p><img src="/assets/img/lifecycle3.79bdbf3c.png" alt="新的周期展示"> <a href="http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank" rel="noopener noreferrer">交互式展示<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>组件的运行过程中，存在不同的阶段。React 为这些阶段提供了钩子方法，允许开发者自定义每个阶段自动执行的函数。这些方法统称为<strong>生命周期方法（lifecycle methods）</strong>。</p> <h2 id="三个阶段"><a href="#三个阶段" class="header-anchor">#</a> 三个阶段</h2> <ul><li>Mounting：初始化阶段</li> <li>Updating：重新渲染阶段</li> <li>umounting：销毁阶段</li></ul> <h2 id="生命周期概述"><a href="#生命周期概述" class="header-anchor">#</a> 生命周期概述</h2> <h3 id="初始化（在组件初始化阶段会执行）"><a href="#初始化（在组件初始化阶段会执行）" class="header-anchor">#</a> 初始化（在组件初始化阶段会执行）</h3> <ul><li><code>constructor</code></li> <li><code>static getDerivedStateFromProps()</code></li> <li><code>componentWillMount() / UNSAFE_componentWillMount()</code></li> <li><code>render()</code></li> <li><code>componentDidMount()</code></li></ul> <h3 id="更新阶段"><a href="#更新阶段" class="header-anchor">#</a> 更新阶段</h3> <p>props或state的改变可能会引起组件的更新，组件重新渲染的过程中会调用以下方法</p> <ul><li><code>componentWillReceiveProps() / UNSAFE_componentWillReceiveProps()</code></li> <li><code>static getDerivedStateFromProps()</code></li> <li><code>shouldComponentUpdate()</code></li> <li><code>componentWillUpdate() / UNSAFE_componentWillUpdate()</code></li> <li><code>render()</code></li> <li><code>getSnapshotBeforeUpdate()</code></li> <li><code>componentDidUpdate()</code></li></ul> <h3 id="卸载阶段"><a href="#卸载阶段" class="header-anchor">#</a> 卸载阶段</h3> <ul><li><code>componentWillUnmount()</code></li></ul> <h3 id="错误处理"><a href="#错误处理" class="header-anchor">#</a> 错误处理</h3> <ul><li><code>componentDidCatch()</code></li></ul> <h2 id="生命周期详解"><a href="#生命周期详解" class="header-anchor">#</a> 生命周期详解</h2> <h3 id="constructor-props"><a href="#constructor-props" class="header-anchor">#</a> constructor(props)</h3> <p>构造函数在挂载之前被调用。在实现 <code>React.Component</code> 构造函数时，需要先在添加其他内容前，调用 <code>super(props)</code>，用来将父组件传来的 <code>props</code> 绑定到这个类中，使用 <code>this.props</code> 将会得到。</p> <p>官方建议不要在 <code>constructor</code> 引入任何具有<strong>副作用和订阅功能</strong>的代码，这些应当在 <code>componentDidMount()</code> 中写入。</p> <p><code>constructor</code> 中应当做些初始化的动作，如：<strong>初始化state</strong>，唯一一个直接修改state的地方。将事件处理函数绑定到类实例上，但也不要使用 <code>setState()</code>。<strong>如果没有必要初始化state或绑定方法，则不需要构造constructor，或者把这个组件换成纯函数写法</strong>。</p> <p>当然也可以利用props初始化state，在之后修改state不会对props造成任何修改，但仍然建议大家提升状态到父组件中，或使用redux统一进行状态管理。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
    color<span class="token operator">:</span> props<span class="token punctuation">.</span>initialColor
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="static-defaultprops"><a href="#static-defaultprops" class="header-anchor">#</a> static defaultProps = {}</h4> <p>设置默认的 <code>props</code> 值，调用一次并缓存</p> <h3 id="static-getderivedstatefromprops"><a href="#static-getderivedstatefromprops" class="header-anchor">#</a> static getDerivedStateFromProps()</h3> <ul><li><code>getDerivedStateFromProps</code> 在组件实例化后，和接受新的 <code>props</code> 后被调用。他返回一个对象来更新状态，或者返回 <code>null</code> 表示 <code>新的 props</code> 不需要任何 <code>state</code> 的更新。</li> <li>如果是由于父组件的 <code>props</code> 更改，所带来的重新渲染，也会触发此方法。</li> <li>尽量不使用，维护俩者状态需要消耗额外资源，增加复杂度</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prevState<span class="token punctuation">.</span>currentId ！<span class="token operator">==</span> nextProps<span class="token punctuation">.</span>itemId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            currentId<span class="token operator">:</span> nextProps<span class="token punctuation">.</span>itemId
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="componentwillmount-unsafe-componentwillmount"><a href="#componentwillmount-unsafe-componentwillmount" class="header-anchor">#</a> componentWillMount()/UNSAFE_componentWillMount()</h3> <p><code>componentWillMount()</code>将在react未来版本中被弃用。<code>UNSAFE_componentWillMount()</code>在组件挂载前被调用，在这个方法中调用<code>setState()</code>不会起作用，是由于他在<code>render()</code>前被调用。</p> <p>为了避免副作用和其他的订阅，官方都建议使用<code>componentDidMount()</code>代替。这个方法是用于在服务器渲染上的唯一方法。</p> <h3 id="render"><a href="#render" class="header-anchor">#</a> render()</h3> <p><code>render()</code>方法是必需的。初始化的关键环节，此时创建虚拟DOM，并进行 diff 算法，重新渲染 DOM树。当他被调用时，他将计算<code>this.props</code>和<code>this.state</code>，并返回以下一种类型：</p> <ul><li>React元素。通过jsx创建，既可以是dom元素，也可以是用户自定义的组件。</li> <li>字符串或数字。他们将会以文本节点形式渲染到dom中。</li> <li>Portals。react 16版本中提出的新的解决方案，可以使组件脱离父组件层级直接挂载在DOM树的任何位置。</li> <li><code>null</code>，什么也不渲染</li> <li>布尔值。也是什么都不渲染，通常后跟组件进行判断。</li></ul> <p>当返回<code>null</code>,<code>false</code>,<code>ReactDOM.findDOMNode(this)</code>将会返回null，什么都不会渲染。</p> <p><code>render()</code>方法必须是一个纯函数，他不应该改变<code>state</code>，也不能直接和浏览器进行交互，应该将事件放在其他生命周期函数中。
如果<code>shouldComponentUpdate()</code>返回<code>false</code>，<code>render()</code>不会被调用。</p> <h4 id="fragments"><a href="#fragments" class="header-anchor">#</a> Fragments</h4> <p>你也可以在<code>render()</code>中使用数组，如：(<em>不要忘记给每个数组元素添加key，防止出现警告</em>)</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>A<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">First item</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>B<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Second item</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>C<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Third item</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>换一种写法，可以不写key（v16++）</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">First item</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Second item</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Third item</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.Fragment</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="componentdidmount"><a href="#componentdidmount" class="header-anchor">#</a> componentDidMount()</h3> <p>还记得上面那个 <code>componentWillMount()</code> 将要装载吗？这里已经装载完成了，在 <code>render()</code> 之后调用，并且强调是在所有的子组件都 <code>render</code> 完之后才调用。如果你想和其他JavaScript框架一起使用，可以在这个方法中调用 <strong>setTimeout, setInterval或者发送AJAX请求</strong>等操作(防止异步操作阻塞UI)。</p> <h3 id="componentwillreceiveprops-nextprops-unsafe-componentwillreceiveprops"><a href="#componentwillreceiveprops-nextprops-unsafe-componentwillreceiveprops" class="header-anchor">#</a> componentWillReceiveProps(nextProps)/UNSAFE_componentWillReceiveProps()</h3> <p>官方建议使用<code>getDerivedStateFromProps</code>函数代替<code>componentWillReceiveProps()</code>。当组件挂载后，接收到新的<code>props</code>后会被调用。如果需要更新<code>state</code>来响应<code>props</code>的更改，则可以进行<code>this.props</code>和<code>nextProps</code>的比较，并在此方法中使用<code>this.setState()</code>。</p> <p>如果父组件会让这个组件重新渲染，即使<code>props</code>没有改变，也会调用这个方法。</p> <p>react不会在组件初始化props时调用这个方法。调用<code>this.setState</code>也不会触发。</p> <h3 id="shouldcomponentupdate-nextprops-nextstate"><a href="#shouldcomponentupdate-nextprops-nextstate" class="header-anchor">#</a> shouldComponentUpdate(nextProps, nextState)</h3> <p>调用<code>shouldComponentUpdate</code>使react知道，组件的输出是否受<code>state</code>和<code>props</code>的影响。默认每个状态的更改都会重新渲染，大多数情况下应该保持这个默认行为。</p> <p>在渲染新的<code>props</code>或<code>state</code>前，<code>shouldComponentUpdate</code>会被调用。默认为<code>true</code>。这个方法不会在初始化时被调用，也不会在<code>forceUpdate()</code>时被调用。返回<code>false</code>不会阻止子组件在<code>state</code>更改时重新渲染。</p> <p>如果<code>shouldComponentUpdate()</code>返回<code>false</code>，<code>componentwillupdate</code>、<code>render</code>和<code>componentDidUpdate</code>不会被调用。</p> <blockquote><p>在未来版本，shouldComponentUpdate()将会作为一个提示而不是严格的指令，返回false仍然可能导致组件的重新渲染。</p></blockquote> <p>官方并不建议在<code>shouldComponentUpdate()</code>中进行深度查询或使用<code>JSON.stringify()</code>，他效率非常低，并且损伤性能。</p> <h3 id="unsafe-componentwillupdate-nextprops-nextstate"><a href="#unsafe-componentwillupdate-nextprops-nextstate" class="header-anchor">#</a> UNSAFE_componentWillUpdate(nextProps, nextState)</h3> <p>在渲染新的<code>state</code>或<code>props</code>时，<code>UNSAFE_componentWillUpdate</code>会被调用，将此作为在更新发生之前进行准备的机会。这个方法不会在初始化时被调用。</p> <p><em>不能在这里使用this.setState()</em>，也不能做会触发视图更新的操作。如果需要更新<code>state</code>或<code>props</code>，调用<code>getDerivedStateFromProps</code>。</p> <h3 id="getsnapshotbeforeupdate"><a href="#getsnapshotbeforeupdate" class="header-anchor">#</a> getSnapshotBeforeUpdate()</h3> <p>在react <code>render()</code>后的输出被渲染到DOM之前被调用。它使您的组件能够在它们被潜在更改之前捕获当前值（如滚动位置）。这个生命周期返回的任何值都将作为参数传递给componentDidUpdate（）。</p> <h3 id="componentdidupdate-prevprops-prevstate-snapshot"><a href="#componentdidupdate-prevprops-prevstate-snapshot" class="header-anchor">#</a> componentDidUpdate(prevProps, prevState, snapshot)</h3> <p>在更新发生后立即调用<code>componentDidUpdate()</code>。此方法不用于初始渲染。当组件更新时，将此作为一个机会来操作DOM。只要您将当前的props与以前的props进行比较（例如，如果props没有改变，则可能不需要网络请求），这也是做网络请求的好地方。</p> <p>如果组件实现<code>getSnapshotBeforeUpdate()</code>生命周期，则它返回的值将作为第三个“快照”参数传递给<code>componentDidUpdate()</code>。否则，这个参数是<code>undefined</code>。</p> <h3 id="componentwillunmount"><a href="#componentwillunmount" class="header-anchor">#</a> componentWillUnmount()</h3> <p>在组件被卸载并销毁之前立即被调用。在此方法中执行任何必要的清理，例如使定时器无效，取消网络请求或清理在componentDidMount（）中创建的任何监听。</p> <h3 id="componentdidcatch-error-info"><a href="#componentdidcatch-error-info" class="header-anchor">#</a> componentDidCatch(error, info)</h3> <p>错误边界是React组件，可以在其子组件树中的任何位置捕获JavaScript错误，记录这些错误并显示回退UI，而不是崩溃的组件树。错误边界在渲染期间，生命周期方法以及整个树下的构造函数中捕获错误。</p> <p>如果类组件定义了此生命周期方法，则它将成为错误边界。在它中调用 <code>setState()</code> 可以让你在下面的树中捕获未处理的JavaScript错误，并显示一个后备UI。只能使用错误边界从意外异常中恢复;不要试图将它们用于控制流程。<a href="https://reactjs.org/blog/2017/07/26/error-handling-in-react-16.html" target="_blank" rel="noopener noreferrer">详细<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>错误边界只会捕获树中下面组件中的错误。错误边界本身不能捕获错误。</p> <h2 id="常用生命周期"><a href="#常用生命周期" class="header-anchor">#</a> 常用生命周期</h2> <ul><li><code>componentDidMount()</code> 会在组件挂载后自动调用；</li> <li><code>componentDidUpdate()</code> 会在 UI 每次更新后调用（即组件挂载成功以后，每次调用 <code>render</code> 方法，都会触发这个方法）；</li> <li><code>componentWillUnmount()</code> 会在组件卸载前自动调用</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新于:</span> <span class="time">3/10/2020, 1:33:56 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend/react/first_component.html" class="prev">
        第一个组件
      </a></span> <span class="next"><a href="/frontend/react/rendering.html">
        页面渲染
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e81b8cfe.js" defer></script><script src="/assets/js/2.e6f4d46e.js" defer></script><script src="/assets/js/24.a63d4ca5.js" defer></script>
  </body>
</html>
