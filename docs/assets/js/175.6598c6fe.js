(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{549:function(t,s,a){"use strict";a.r(s);var n=a(28),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"性能提升"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#性能提升"}},[t._v("#")]),t._v(" 性能提升")]),t._v(" "),a("h2",{attrs:{id:"图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图片"}},[t._v("#")]),t._v(" 图片")]),t._v(" "),a("h3",{attrs:{id:"对于非纯色图【2x】图适配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对于非纯色图【2x】图适配"}},[t._v("#")]),t._v(" 对于非纯色图【2X】图适配")]),t._v(" "),a("ul",[a("li",[t._v("媒体查询、srcset属性、image-set属性匹配的基本都是高端浏览器，兼容性略差；")]),t._v(" "),a("li",[t._v("脚本控制脚本兼容性更佳；")]),t._v(" "),a("li",[t._v("目前很多用户使用的还是 windows 的普清屏，mac os 系统的高清屏用的不是很多。基于这类情况，比媒体查询更为方便的"),a("strong",[t._v("srcset属性")]),t._v("和"),a("strong",[t._v("image-set属性")]),t._v("方案，即内容图使用 "),a("strong",[t._v("srcset 属性")]),t._v("适配，背景图使用 "),a("strong",[t._v("image-set 属性")]),t._v("适配。")])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("images/img@1x.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("srcset")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("images/img_@1x.png 1x, images/img@2x.png 2x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("alt")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".bg_icon")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("-webkit-image-set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"images/bg@1x.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 1x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"images/bg@2x.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 2x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("image-set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"images/bg@1x.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 1x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"images/bg@2x.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 2x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"正确使用图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#正确使用图片"}},[t._v("#")]),t._v(" 正确使用图片")]),t._v(" "),a("ul",[a("li",[t._v("使用 WebP 格式图片。因为 WebP 格式具有更好的图像数据压缩算法，能带来更小的图片体积，而且拥有肉眼识别无差异的图像质量，缺点就是兼容性并不好；")])]),t._v(" "),a("h2",{attrs:{id:"cdn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cdn"}},[t._v("#")]),t._v(" CDN")]),t._v(" "),a("p",[t._v("Content Delivery Network，即内容分发网络。通过在现有的 Internet 中增加一层新的网络架构，将网站的内容发布到最接近用户的 cache 服务器内，通过 DNS 负载均衡的技术，判断用户来源就近访问 cache 服务器取得所需的内容；")]),t._v(" "),a("h3",{attrs:{id:"静态资源缓存，移动端离线缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#静态资源缓存，移动端离线缓存"}},[t._v("#")]),t._v(" 静态资源缓存，移动端离线缓存")]),t._v(" "),a("p",[t._v("1.配置 ETag, If-None-Match，上次 ETag 的内容。浏览器发出请求询问服务端，某某资源是否过期。服务端发现没有过期，就直接返回一个状态码 304、正文为空的响应，告知浏览器使用本地缓存；如果资源有更新，服务端返回状态码 200、Etag 和正文。这个过程被称之为 HTTP 的协商缓存，通常也叫做"),a("strong",[t._v("弱缓存")]),t._v("。")]),t._v(" "),a("p",[t._v("2.添加 Expires 头：服务端通过响应头告诉浏览器，在什么时间之前（Expires）或在多长时间之内（Cache-Control: Max-age=xxx），不要再请求服务器了。这个机制称之为 HTTP 的"),a("strong",[t._v("强缓存")]),t._v("（有明确的失效期）。一般会对 CSS、JS、图片等资源使用强缓存，而入口文件（HTML）一般使用协商缓存或不缓存。")]),t._v(" "),a("p",[t._v("3.AppCache：主要利用 manifest 文本文件，告知浏览器被缓存的内容以及不缓存的内容。manifest 文件可分为三个部分：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("CACHE MANIFEST")]),t._v(" 在此标题下列出的文件将在首次下载后进行缓存，等价于 CACHE；")]),t._v(" "),a("li",[a("code",[t._v("NETWORK")]),t._v(" 在此标题下列出的文件需要与服务器的连接，且不会被缓存；")]),t._v(" "),a("li",[a("code",[t._v("FALLBACK")]),t._v(" 在此标题下列出的文件规定当页面无法访问时的回退页面；")])]),t._v(" "),a("p",[t._v("4.localStorage：用于持久化的本地存储，除非主动删除数据，否则数据是永远不会过期的;")]),t._v(" "),a("h2",{attrs:{id:"开启gzip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启gzip"}},[t._v("#")]),t._v(" 开启Gzip")]),t._v(" "),a("p",[t._v("Gzip 的思想就是把文件先在服务器端进行压缩，且压缩率达到 85%，然后再传输，传输完毕后浏览器会重新对压缩过的内容进行解压缩，并执行。好处在于 Gzip 的支持已经很好，且爬虫可识别，压缩率达到 66%-85% 显著减少了文件传输的大小。另外，Gzip 对pdf 文件的压缩效果不大，而且会浪费 CPU。")])])}),[],!1,null,null,null);s.default=e.exports}}]);